<p id="notice"><%= notice %></p>

<h1>Listing Tests</h1>

<table class="table">
  <thead>
    <tr>
      <th>Teacher</th>
      <th>Name</th>
      <th>Available</th>
      <th>Number of questions</th>
      <th>Random</th>
      <th>DataBase</th>

      <th>Standard score</th>
      <th>Bdb</th>
      <th>Bd</th>
      <th>Dost</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tests.each do |test| %>
      <tr>
       <%if (test.available == true && !current_user.admin?) || current_user.admin? %>
        <td><%= User.find(test.user_id).firstname + ' ' + User.find(test.user_id).lastname %></td>
        <td><%= test.name %></td>
        <td><%= test.available %></td>

        <%if test.number_of_questions != 0 %>
        <td><%= test.number_of_questions %></td>
        <% else %>
        <td>All question</td>
        <% end %>

        <td><%= test.random %></td>
        <td>  <%= Database.find(test.database).name %></td>
        <td><%= test.standard_score %></td>
        <td><%= test.bdb %></td>
        <td><%= test.bd %></td>
        <td><%= test.dost %></td>
        <%if current_user.admin? %>
        <td><%= link_to 'Show', test %></td>
        <td><%= link_to 'Edit', edit_test_path(test) %></td>
        <td><%= link_to 'Destroy', test, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <td><%= link_to 'Results', test_results_path(test) %></td>
        <% end %>
        <td><%= link_to 'Execute', :action => "prepare_test",:id =>test.id, :selected_test => test.id%></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%if current_user.admin? %>
<%= link_to 'Cerate new Test', new_test_path, class: 'btn btn-primary' %>
<%= link_to 'Show database connections', databases_path, class: 'btn btn-primary' %>
<% end %>
